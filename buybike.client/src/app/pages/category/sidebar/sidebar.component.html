<div class="sidebar">
  <div class="accordion">
    <h2>Категории</h2>
    <ul class="type-cat">
      <li
        [ngClass]="{ hide: type.name.toLowerCase() !== selectedTypeName }"
        *ngFor="let type of productTypes; index as i"
        id="type{{ i }}"
      >
        <div class="category-name-group">
          <a
            [routerLink]="'/' + type.name.toLowerCase()"
            [ngStyle]="{
              color:
                type.name.toLowerCase() === selectedTypeName ? 'red' : 'black'
            }"
            href=""
            >{{ type.name }}</a
          >
          <button
            class="category-toggle-btn toggle-btn"
            *ngIf="type.categories.length > 0"
            (click)="toggle('type' + i)"
          >
            <i
              [ngClass]="{
                'fa-plus': type.name.toLowerCase() !== selectedTypeName,
                'fa-minus': type.name.toLowerCase() === selectedTypeName
              }"
              class="fa-solid"
            ></i>
          </button>
        </div>

        <ul>
          <li
            [ngClass]="{ hide: !selectedCategories.includes(category.name) }"
            *ngFor="let category of type.categories; index as j"
            id="cat{{ j }}"
          >
            <div class="category-name-group">
              <a
                [routerLink]="
                  '/' +
                  type.name.toLowerCase() +
                  '/' +
                  category.name.toLowerCase()
                "
                [ngStyle]="{
                  color:
                    category.name.toLowerCase() === selectedCategoryName
                      ? 'red'
                      : 'black'
                }"
                href=""
                >{{ category.name }}</a
              >
              <button
                class="category-toggle-btn toggle-btn"
                *ngIf="category.subCategories.length > 0"
                (click)="toggle('cat' + j)"
              >
                <i
                  [ngClass]="{
                    'fa-plus': !selectedCategories.includes(category.name),
                    'fa-minus': selectedCategories.includes(category.name)
                  }"
                  class="fa-solid"
                ></i>
              </button>
            </div>
            <ul>
              <li *ngFor="let subCategory of category.subCategories">
                <a
                  [ngStyle]="{
                    color:
                      subCategory.name.toLowerCase() === selectedCategoryName
                        ? 'red'
                        : 'black'
                  }"
                  href=""
                  >{{ subCategory.name }}</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="filter">
    <h2>Филтър</h2>

    <div id="filter-price">
      <button
        class="filter-toggle-btn toggle-btn"
        (click)="toggle('filter-price')"
      >
        <span class="filter-title">Цена</span>
        <i class="fa-solid fa-minus"></i>
      </button>
      <ul>
        <ngx-slider
          [(value)]="value"
          [(highValue)]="highValue"
          [options]="options"
          (userChangeStart)="onUserChangeStart($event)"
          (userChange)="onUserChange($event)"
          (userChangeEnd)="onUserChangeEnd($event)"
          (valueChange)="onValueChange($event)"
          (highValueChange)="onHighValueChange($event)"
        >
          >
          <div>от: {{ value }}</div>
          <div>до: {{ highValue }}</div>
        </ngx-slider>
      </ul>
    </div>

    <div id="filter-makes">
      <button
        class="filter-toggle-btn toggle-btn"
        (click)="toggle('filter-makes')"
      >
        <span class="filter-title">Производител</span>
        <i class="fa-solid fa-minus"></i>
      </button>
      <ul>
        <li class="make" *ngFor="let make of manufacturers; index as i">
          <input type="checkbox" [name]="i" />

          <label for="{{ i }}">{{ make.name }}</label>
        </li>
      </ul>
    </div>

    <div id="filter-in-stock">
      <button
        class="filter-toggle-btn toggle-btn"
        (click)="toggle('filter-in-stock')"
      >
        <span class="filter-title">Наличност</span>
        <i class="fa-solid fa-minus"></i>
      </button>
      <ul>
        <li>
          <input type="checkbox" name="inStock" id="" />
          <label for="inStock">Налични</label>
        </li>
        <li>
          <input type="checkbox" name="outOfStock" id="" />
          <label for="outOfStock">Неналични</label>
        </li>
      </ul>
    </div>
  </div>
</div>
